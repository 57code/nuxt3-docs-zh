# hello nuxt3

# Nuxt é…ç½®æ–‡ä»¶ [Nuxt configuration file](https://v3.nuxtjs.org/docs/directory-structure/nuxt.config)

Nuxt å¯ä»¥ç”¨ä¸€ä¸ª `nuxt.config` æ–‡ä»¶è½»æ¾é…ç½®ï¼Œè¯¥æ–‡ä»¶çš„æ‰©å±•åå¯ä»¥æ˜¯ `.js`ã€`.ts` æˆ– `.mjs`

```ts
import { defineNuxtConfig } from "nuxt3"

export default defineNuxtConfig({
  // æˆ‘çš„ Nuxt é…ç½®
})
```

äº†è§£æ›´å¤šå…³äºæ‰€æœ‰ä¸åŒé…ç½®å±æ€§çš„ä¿¡æ¯

## åˆ«å alias

æ‚¨å¯ä»¥é€šè¿‡å®šä¹‰é¢å¤–çš„åˆ«åæ¥è®¿é—® JavaScript å’Œ CSS ä¸­çš„è‡ªå®šä¹‰ç›®å½•æ¥æ”¹è¿›å¼€å‘ä½“éªŒã€‚

- **ç±»å‹ï¼š** `object`
- **é»˜è®¤å€¼**
  ```json
  {
    "~~": "/project",
    "@@": "/project",
    "~": "/project",
    "@": "/project",
    "assets": "/project/assets",
    "public": "/project"
  }
  ```
- **ç‰ˆæœ¬ï¼š2, 3**

::: info æ³¨æ„ï¼š

- åœ¨ webpack ä¸Šä¸‹æ–‡ï¼ˆå›¾åƒæºã€CSS - ä½†ä¸æ˜¯ JavaScriptï¼‰ä¸­ï¼Œæ‚¨å¿…é¡»é€šè¿‡åœ¨åˆ«åå‰åŠ ä¸Š `~` æ¥è®¿é—®åˆ«åã€‚
- å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨ TypeScript å¹¶å¸Œæœ›ä½¿ç”¨æ‚¨åœ¨ TypeScript æ–‡ä»¶ä¸­å®šä¹‰çš„åˆ«åï¼Œåˆ™éœ€è¦å°†åˆ«åæ·»åŠ åˆ° `tsconfig.json` ä¸­çš„ `paths` å¯¹è±¡ã€‚

:::

**ç¤ºä¾‹ï¼š**

<!-- prettier-ignore-start -->
```js
import { resolve } from 'pathe'
export default {
  alias: {
    'images': resolve(__dirname, './assets/images'),
    'style': resolve(__dirname, './assets/style'),
    'data': resolve(__dirname, './assets/other/data')
  }
}
```
<!-- prettier-ignore-end -->

## æ„å»ºç›®å½• buildDir

å®šä¹‰æ„å»ºåçš„ Nuxt æ–‡ä»¶çš„å­˜æ”¾ç›®å½•ã€‚

- **ç±»å‹ï¼š** `string`
- **é»˜è®¤å€¼ï¼š** `"/project/.nuxt"`
- **ç‰ˆæœ¬ï¼š2, 3**

:::tip ğŸ’¡ æç¤ºï¼š

è®¸å¤šå·¥å…·å‡å®š `.nuxt` æ˜¯ä¸€ä¸ªéšè—ç›®å½•ï¼ˆå› ä¸ºå®ƒä»¥ `.` å¼€å¤´ï¼‰ã€‚ å¦‚æœå› æ­¤å‡ºç°é—®é¢˜ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ­¤é€‰é¡¹æ¥é˜²æ­¢è¿™ç§æƒ…å†µå‘ç”Ÿã€‚

:::

**ç¤ºä¾‹ï¼š**

```js
export default {
  buildDir: "nuxt-build",
}
```

## æ„å»ºæœŸæ¨¡å— buildModules

> ä»…åœ¨å¼€å‘å’Œæ„å»ºæœŸé—´éœ€è¦çš„æ¨¡å—ã€‚

- **ç±»å‹ï¼š** `array`
- **ç‰ˆæœ¬ï¼š2, 3**

æ¨¡å—æ˜¯ Nuxt æ‰©å±•ï¼Œå¯ä»¥æ‰©å±•å…¶æ ¸å¿ƒåŠŸèƒ½å¹¶æ·»åŠ æ— é™çš„é›†æˆã€‚  
Nuxt å°è¯•ä½¿ç”¨ node require è·¯å¾„ï¼ˆåœ¨ `node_modules` ä¸­ï¼‰è§£æ modules æ•°ç»„ä¸­çš„æ¯ä¸ªé¡¹ç›®ï¼Œç„¶åå¦‚æœä½¿ç”¨ `~` åˆ«åï¼Œå°†ä»é¡¹ç›® `srcDir` è§£æã€‚

::: tip æ„å»ºæœŸæ¨¡å— buildModules æœ‰ä¸‰ç§å£°æ˜å½¢å¼ï¼š

- ä¸€ä¸ª `å­—ç¬¦ä¸²`ï¼ˆå¯ä»¥æŒ‡ä¸€ä¸ªåŒ…ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ–‡ä»¶çš„è·¯å¾„ï¼‰
- ä»¥æ¨¡å—å­—ç¬¦ä¸²ä½œä¸ºç¬¬ä¸€é¡¹ï¼Œä»¥é€‰é¡¹å¯¹è±¡ä½œä¸ºç¬¬äºŒé¡¹çš„ `å…ƒç»„`
- ä¸€ä¸ª `å†…è”æ¨¡å—å‡½æ•°`

:::

**ç¤ºä¾‹ï¼š**

```js
modules: [
  // ä½¿ç”¨åŒ…å
  "@nuxtjs/axios",
  // ä¸é¡¹ç›® srcDir åœ°ç›¸å¯¹è·¯å¾„
  "~/modules/awesome.js",
  // æºå¸¦é…ç½®é€‰é¡¹
  ["@nuxtjs/google-analytics", { ua: "X1234567" }],
  // å†…è”å‡½æ•°
  function () {},
]
```

::: info æ³¨æ„ï¼š

- æ¨¡å—æŒ‰é¡ºåºæ‰§è¡Œï¼Œå› æ­¤é¡ºåºå¾ˆé‡è¦ã€‚
- ä½¿ç”¨`buildModules` æœ‰åŠ©äºåŠ å¿«ç”Ÿäº§å¯åŠ¨é€Ÿåº¦ï¼Œå¹¶æ˜¾ç€å‡å°‘ç”Ÿäº§éƒ¨ç½²ä¸­`node_modules` çš„å¤§å°ã€‚è¯·å‚è€ƒå„
  æ¨¡å—çš„æ–‡æ¡£ï¼Œçœ‹çœ‹æ˜¯å¦æ¨èä½¿ç”¨`modules` æˆ–`buildModules`ã€‚

:::

## æ ·å¼ css

- **ç±»å‹ï¼š** `array`
- **ç‰ˆæœ¬ï¼š2, 3**

> æ‚¨å¯ä»¥å®šä¹‰è¦å…¨å±€è®¾ç½®çš„ `CSS æ–‡ä»¶` / `æ¨¡å—` / `åº“`ï¼ˆåŒ…å«åœ¨æ¯ä¸ªé¡µé¢ä¸­ï¼‰ã€‚

Nuxt ä¼šè‡ªåŠ¨æ ¹æ®æ‰©å±•åçŒœæµ‹æ–‡ä»¶ç±»å‹ï¼Œå¹¶ä½¿ç”¨é€‚å½“çš„é¢„å¤„ç†å™¨ã€‚å¦‚æœéœ€è¦ä½¿ç”¨æ‰€éœ€çš„åŠ è½½ç¨‹åºï¼Œæ‚¨ä»ç„¶éœ€è¦å®‰è£…è¿™äº› **loader** ã€‚
**ç¤ºä¾‹ï¼š**

```js
css: [
  // ç›´æ¥åŠ è½½ä¸€ä¸ª Node.js æ¨¡å—ï¼ˆè¿™é‡Œæ˜¯ä¸€ä¸ª Sass æ–‡ä»¶ï¼‰
  "bulma",
  // é¡¹ç›®ä¸­çš„ CSS æ–‡ä»¶
  "@/assets/css/main.css",
  // é¡¹ç›®ä¸­çš„SCSSæ–‡ä»¶
  "@/assets/css/main.scss",
]
```

## å¼€å‘æ¨¡å¼ dev

- **ç±»å‹ï¼š** `boolean`
- **é»˜è®¤ï¼š** `false`
- **ç‰ˆæœ¬ï¼š2, 3**

> Nuxt æ˜¯å¦åœ¨å¼€å‘æ¨¡å¼ä¸‹è¿è¡Œã€‚

é€šå¸¸æ‚¨ä¸éœ€è¦è®¾ç½®è¿™ä¸ªé€‰é¡¹ã€‚

## ç›®å½•ç»“æ„ dir

> è‡ªå®šä¹‰ nuxt ä½¿ç”¨çš„é»˜è®¤ç›®å½•ç»“æ„ã€‚

å¦‚æ— å¿…è¦ï¼Œæœ€å¥½ä¿æŒé»˜è®¤å€¼ã€‚

### å¸ƒå±€ `layouts`

- **ç±»å‹ï¼š** `string`
- **é»˜è®¤ï¼š** `"layouts"`
- **ç‰ˆæœ¬ï¼š2, 3**

> Layouts ç›®å½•ä¸­çš„æ¯ä¸ªæ–‡ä»¶éƒ½å°†è‡ªåŠ¨æ³¨å†Œä¸º Nuxt çš„å¸ƒå±€ã€‚

### é¡µé¢æ–‡ä»¶å¤¹ `pages`

- **ç±»å‹ï¼š** `string`
- **é»˜è®¤ï¼š** `"pages"`
- **ç‰ˆæœ¬ï¼š2, 3**

> æ­¤æ–‡ä»¶å¤¹å†…çš„é¡µé¢ç»„ä»¶å°†ä¼šä»¥æ­¤ç›®å½•ä¸ºæ ¹è‡ªåŠ¨ç”Ÿæˆé¡µé¢è·¯ç”±

### å…¬å…±æ–‡ä»¶å¤¹`public`

- **ç±»å‹ï¼š** `string`
- **é»˜è®¤ï¼š** `"public"`
- **ç‰ˆæœ¬ï¼š3**

> åŒ…å«é™æ€æ–‡ä»¶çš„ç›®å½•ï¼Œå¯é€šè¿‡ Nuxt æœåŠ¡å™¨ç›´æ¥è®¿é—®ï¼Œå¹¶åœ¨ç”Ÿæˆåº”ç”¨ç¨‹åºæ—¶è‡ªåŠ¨å¤åˆ¶åˆ° `dist` æ–‡ä»¶å¤¹ä¸­ã€‚

## æ‰©å±• extensions

- **ç±»å‹ï¼š** `array`
- **é»˜è®¤ï¼š** `[".js", ".jsx", ".mjs", ".ts", ".tsx", ".vue"]`
- **ç‰ˆæœ¬ï¼š2, 3**

> Nuxt è§£æå™¨åº”è¯¥è§£æçš„æ‰©å±•ã€‚

## é’©å­ hooks

- **é»˜è®¤ï¼š** `null`
- **ç‰ˆæœ¬ï¼š2, 3**

> Hooks æ˜¯ Nuxt äº‹ä»¶çš„ç›‘å¬å™¨ï¼Œé€šå¸¸åœ¨æ¨¡å—ä¸­ä½¿ç”¨ï¼Œä½†ä¹Ÿå¯ä»¥åœ¨ `nuxt.config` ä¸­ä½¿ç”¨ã€‚

åœ¨å†…éƒ¨ï¼Œé’©å­éµå¾ªä½¿ç”¨å†’å·çš„å‘½åæ¨¡å¼ï¼ˆä¾‹å¦‚ï¼Œbuild:doneï¼‰ã€‚ä¸ºäº†ä¾¿äºé…ç½®ï¼Œæ‚¨è¿˜å¯ä»¥å°†å®ƒä»¬æ„å»ºä¸º `nuxt.config` ä¸­çš„åˆ†å±‚å¯¹è±¡ï¼ˆå¦‚ä¸‹æ‰€ç¤ºï¼‰ã€‚

**ç¤ºä¾‹ï¼š**

```js
import fs from "fs"
import path from "path"
export default {
  hooks: {
    build: {
      done(builder) {
        const extraFilePath = path.join(builder.nuxt.options.buildDir, "extra-file")
        fs.writeFileSync(extraFilePath, "Something extra")
      },
    },
  },
}
```

## å…ƒä¿¡æ¯ meta

> åœ¨æ¯ä¸ªé¡µé¢ä¸Šä¸º `<head>` è®¾ç½®é»˜è®¤é…ç½®ã€‚

**ç¤ºä¾‹ï¼š**

```js
meta: {
 meta: [
   // <meta name="viewport" content="width=device-width, initial-scale=1">
   { name: 'viewport', content: 'width=device-width, initial-scale=1' }
 ],
 script: [
   // <script src="https://myawesome-lib.js"></script>
   { src: 'https://awesome-lib.js' }
 ],
 link: [
   // <link rel="stylesheet" href="https://myawesome-lib.css">
   { rel: 'stylesheet', href: 'https://awesome-lib.css' }
 ],
 // è¯·æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–çš„åŒºåŸŸ
 style: [
   // <style type="text/css">:root { color: red }</style>
   { children: ':root { color: red }', type: 'text/css' }
 ]
}
```

### `link` æ ‡ç­¾

- **ç±»å‹ï¼š** `array`
- **ç‰ˆæœ¬ï¼š3**

### `meta` æ ‡ç­¾

- **ç±»å‹ï¼š** `array`
- **ç‰ˆæœ¬ï¼š3**

### `script` æ ‡ç­¾

- **ç±»å‹ï¼š** `array`
- **ç‰ˆæœ¬ï¼š3**

### `style` æ ‡ç­¾

- **ç±»å‹ï¼š** `array`
- **ç‰ˆæœ¬ï¼š3**

## æ¨¡å— modules

- **ç±»å‹ï¼š** `array`
- **ç‰ˆæœ¬ï¼š2,3**

> æ¨¡å—æ˜¯ Nuxt æ‰©å±•ï¼Œå¯ä»¥æ‰©å±•å…¶æ ¸å¿ƒåŠŸèƒ½ï¼Œå¹¶æ·»åŠ æ— ç©·çš„é›†æˆ

:::tip æ¨¡å—åœ°ä¸‰ç§å½¢å¼ï¼š

- ä¸€ä¸ª `å­—ç¬¦ä¸²`ï¼ˆå¯ä»¥æŒ‡ä¸€ä¸ªåŒ…ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ–‡ä»¶çš„è·¯å¾„ï¼‰
- ä»¥æ¨¡å—å­—ç¬¦ä¸²ä½œä¸ºç¬¬ä¸€é¡¹ï¼Œä»¥é€‰é¡¹å¯¹è±¡ä½œä¸ºç¬¬äºŒé¡¹çš„ `å…ƒç»„`
- ä¸€ä¸ª `å†…è”æ¨¡å—å‡½æ•°`

:::
::: info æ³¨æ„ï¼š

- æ¨¡å—æŒ‰é¡ºåºæ‰§è¡Œï¼Œå› æ­¤é¡ºåºå¾ˆé‡è¦ã€‚
- Nuxt å°è¯•ä½¿ç”¨ node require è·¯å¾„ï¼ˆåœ¨ `node_modules` ä¸­ï¼‰è§£æ modules æ•°ç»„ä¸­çš„æ¯ä¸ªé¡¹ç›®ã€‚å¦‚æœä½¿ç”¨äº† `~` åˆ«åï¼Œå°†ä»é¡¹ç›® `srcDir` ä¸­è§£æã€‚

:::

**ç¤ºä¾‹ï¼š**

```js
modules: [
  // ä½¿ç”¨åŒ…å
  "@nuxtjs/axios",
  // ä¸é¡¹ç›® srcDir åœ°ç›¸å¯¹è·¯å¾„
  "~/modules/awesome.js",
  // æºå¸¦é…ç½®é€‰é¡¹
  ["@nuxtjs/google-analytics", { ua: "X1234567" }],
  // å†…è”å‡½æ•°
  function () {},
]
```

## privateRuntimeConfig

- **ç‰ˆæœ¬ï¼š2, 3**

> è¿è¡Œæ—¶é…ç½®å…è®¸å‘ Nuxt åº”ç”¨ä¸Šä¸‹æ–‡ä¼ é€’åŠ¨æ€é…ç½®å’Œç¯å¢ƒå˜é‡ã€‚

`privateRuntimeConfig` å†…çš„é…ç½®å°†è¢«æ·»åŠ åˆ° Nuxt æœ‰æ•ˆè´Ÿè½½ä¸­ï¼Œå› æ­¤ä¸éœ€è¦é‡æ–°æ„å»ºæ¥æ›´æ–°å¼€å‘ä¸­çš„é…ç½®ï¼Œæˆ–è€…å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºç”± Nuxt æœåŠ¡å™¨æä¾›æœåŠ¡çš„è¯ã€‚ï¼ˆå¯¹äºé™æ€ç«™ç‚¹ï¼Œæ‚¨ä»ç„¶éœ€è¦é‡æ–°ç”Ÿæˆç«™ç‚¹ä»¥æŸ¥çœ‹æ›´æ”¹ã€‚ï¼‰
æ­¤å¯¹è±¡çš„å€¼åªèƒ½é€šè¿‡ `$config` ä»æœåŠ¡å™¨è®¿é—®ã€‚å®ƒå°†åœ¨æœåŠ¡å™¨ç«¯è¦†ç›– `publicRuntimeConfig` å†…ç›¸åŒå†…å®¹ã€‚å®ƒåº”è¯¥ç”¨æ¥ä¿å­˜**ç§æœ‰**ç¯å¢ƒå˜é‡(ä¸åº”è¯¥åœ¨å‰ç«¯å…¬å¼€)ã€‚è¿™å¯èƒ½åŒ…æ‹¬å¯¹æ‚¨çš„ API ç§˜å¯†æ ‡è®°çš„å¼•ç”¨ã€‚

**ç¤ºä¾‹ï¼š**

```js
export default {
  privateRuntimeConfig: {
    apiSecret: process.env.API_SECRET,
  },
}
```

## publicRuntimeConfig

> è¿è¡Œæ—¶é…ç½®å…è®¸å‘ Nuxt åº”ç”¨ä¸Šä¸‹æ–‡ä¼ é€’åŠ¨æ€é…ç½®å’Œç¯å¢ƒå˜é‡ã€‚

- **ç±»å‹ï¼š** `object`
- **ç‰ˆæœ¬ï¼š2, 3**
- **é»˜è®¤ï¼š**

```json
{
  "app": {
    "basePath": "/",
    "assetsPath": "/_nuxt/",
    "cdnURL": null
  }
}
```

`publicRuntimeConfig` å†…çš„é…ç½®å°†è¢«æ·»åŠ åˆ° Nuxt æœ‰æ•ˆè´Ÿè½½ä¸­ï¼Œå› æ­¤ä¸éœ€è¦é‡æ–°æ„å»ºæ¥æ›´æ–°å¼€å‘ä¸­çš„é…ç½®ï¼Œæˆ–è€…å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºç”± Nuxt æœåŠ¡å™¨æä¾›æœåŠ¡çš„è¯ã€‚ï¼ˆå¯¹äºé™æ€ç«™ç‚¹ï¼Œæ‚¨ä»ç„¶éœ€è¦é‡æ–°ç”Ÿæˆç«™ç‚¹ä»¥æŸ¥çœ‹æ›´æ”¹ã€‚ï¼‰
è¿™ä¸ªå¯¹è±¡çš„å€¼å¯ä»¥ä»å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä½¿ç”¨ `$config` è®¿é—®ã€‚ å®ƒåº”è¯¥ä¿å­˜**å…¬å…±**ç¯å¢ƒå˜é‡ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥åœ¨å‰ç«¯è®¿é—®ã€‚ è¿™å¯èƒ½åŒ…æ‹¬å¯¹æ‚¨çš„å…¬å…± URL çš„å¼•ç”¨ã€‚

**ç¤ºä¾‹ï¼š**

```js
export default {
  publicRuntimeConfig: {
    baseURL: process.env.BASE_URL || "https://nuxtjs.org",
  },
}
```

## rootDir

> å®šä¹‰åº”ç”¨ç¨‹åºçš„å·¥ä½œåŒºç›®å½•ã€‚

- **ç±»å‹ï¼š** `object`
- **ç‰ˆæœ¬ï¼š2, 3**
- **é»˜è®¤ï¼š** `"/project"`

æ­¤å±æ€§å¯ä»¥è¢«è¦†ç›–(ä¾‹å¦‚ï¼Œè¿è¡Œ `nuxt ./my-app/` å°† rootDir è®¾ç½®ä¸º `./my-app/` æ¥è‡ª å½“å‰/å·¥ä½œ ç›®å½•ã€‚  
é€šå¸¸ä¸éœ€è¦é…ç½®æ­¤é€‰é¡¹ã€‚

## serverMiddleware

> æœåŠ¡å™¨ä¸­é—´ä»¶æ˜¯å¤„ç†æœåŠ¡å™¨ç«¯è¯·æ±‚çš„ `connect/express/h3-shape` å‡½æ•°ã€‚ å®ƒä»¬åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œå¹¶åœ¨ Vue æ¸²æŸ“å™¨ä¹‹å‰è¿è¡Œã€‚

- **ç±»å‹ï¼š** `array`
- **ç‰ˆæœ¬ï¼š2, 3**

é€šè¿‡å‘ `serverMiddleware` æ·»åŠ æ¡ç›®ï¼Œæ‚¨å¯ä»¥æ³¨å†Œé¢å¤–çš„è·¯ç”±æˆ–ä¿®æ”¹ `req`/`res` å¯¹è±¡ï¼Œè€Œæ— éœ€å¤–éƒ¨æœåŠ¡å™¨ã€‚
æ‚¨å¯ä»¥ä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²å¯ä»¥æ˜¯èŠ‚ç‚¹ä¾èµ–é¡¹çš„åç§°æˆ–æ–‡ä»¶è·¯å¾„ã€‚ æ‚¨è¿˜å¯ä»¥ä¼ é€’å¸¦æœ‰ `path` å’Œ `handler` å­—æ®µçš„å¯¹è±¡ã€‚ ï¼ˆ`handler` å¯ä»¥æ˜¯è·¯å¾„æˆ–å‡½æ•°ã€‚ï¼‰

**ç¤ºä¾‹ï¼š**

```js
serverMiddleware: [
  // å°†æ³¨å†Œredirect-ssl npmåŒ…
  "redirect-ssl",
  // Will register file from project server-middleware directory to handle /server-middleware/* requires
  // å°†ä»é¡¹ç›® server-middleware ç›®å½•æ³¨å†Œæ–‡ä»¶ä»¥å¤„ç†å¯¹ /server-middleware/* çš„require
  { path: "/server-middleware", handler: "~/server-middleware/index.js" },
  // æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºè‡ªå®šä¹‰å®ä¾‹
  { path: "/static2", handler: serveStatic(__dirname + "/static2") },
]
```

:::info æ³¨æ„ï¼š
å¦‚æœæ‚¨ä¸å¸Œæœ›ä¸­é—´ä»¶åœ¨æ‰€æœ‰è·¯å¾„ä¸Šè¿è¡Œï¼Œåˆ™åº”è¯¥ä½¿ç”¨å…·æœ‰ç‰¹å®šè·¯å¾„çš„å¯¹è±¡è¡¨å•
:::

**ç¤ºä¾‹ï¼š**

```js
export default function (req, res, next) {
  // req æ˜¯ Node.js http è¯·æ±‚å¯¹è±¡
  console.log(req.url)
  // res æ˜¯ Node.js http å“åº”å¯¹è±¡
  // next æ˜¯è°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶çš„å‡½æ•°
  // å¦‚æœæ‚¨çš„ä¸­é—´ä»¶ä¸æ˜¯æœ€åä¸€ä¸ªï¼Œè¯·ä¸è¦å¿˜è®°åœ¨æœ€åè°ƒç”¨ nextï¼
  next()
}
```

**ç¤ºä¾‹ï¼š**

```js
const bodyParser = require("body-parser")
const app = require("express")()
app.use(bodyParser.json())
app.all("/getJSON", (req, res) => {
  res.json({ data: "data" })
})
module.exports = app
```

**ç¤ºä¾‹ï¼š**

```js
export default {
  serverMiddleware: {
    "/a": "~/server-middleware/a.js",
    "/b": "~/server-middleware/b.js",
    "/c": "~/server-middleware/c.js",
  },
}
```

## srcDir

> å®šä¹‰ Nuxt åº”ç”¨ç¨‹åºçš„æºæ–‡ä»¶ç›®å½•ã€‚

å¦‚æœæŒ‡å®šäº†ç›¸å¯¹è·¯å¾„ï¼Œå®ƒå°†ç›¸å¯¹äº `rootDir`ã€‚

- **ç±»å‹ï¼š** `string`
- **ç‰ˆæœ¬ï¼š2, 3**
- **é»˜è®¤ï¼š** `"/project"`

**ç¤ºä¾‹ï¼š**

```js
export default {
  srcDir: "client/",
}
```

è¿™é€‚ç”¨äºä»¥ä¸‹æ–‡ä»¶å¤¹ç»“æ„ï¼š

```bash
-| app/
---| node_modules/
---| nuxt.config.js
---| package.json
---| client/
------| assets/
------| components/
------| layouts/
------| middleware/
------| pages/
------| plugins/
------| static/
------| store/
```

## ssr

> æ˜¯å¦å¯ç”¨ HTML åŠ¨æ€æ¸²æŸ“ï¼ˆåœ¨æœåŠ¡å™¨æ¨¡å¼ä¸‹ï¼‰æˆ–åœ¨ç”Ÿæˆæ—¶ã€‚ å¦‚æœè®¾ç½®ä¸º `false` å¹¶ç»“åˆ `static` ç›®æ ‡ï¼Œç”Ÿæˆçš„é¡µé¢å°†åªæ˜¾ç¤ºä¸€ä¸ªæ²¡æœ‰å†…å®¹çš„åŠ è½½å±å¹•ã€‚

- **ç±»å‹ï¼š** `boolean`
- **ç‰ˆæœ¬ï¼š2, 3**
- **é»˜è®¤ï¼š** `true`

## vite

> å°†ç›´æ¥ä¼ é€’ç»™ Vite çš„é…ç½®ã€‚

- **ç‰ˆæœ¬ï¼š3**

æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… https://vitejs.dev/configã€‚ è¯·æ³¨æ„ï¼Œå¹¶éæ‰€æœ‰ vite é€‰é¡¹éƒ½åœ¨ Nuxt ä¸­å—æ”¯æŒã€‚

## watchers

> Watchers å±æ€§å…è®¸æ‚¨åœ¨ `nuxt.config` ä¸­è¦†ç›– watchers é…ç½®ã€‚

### `chokidar`

> ç›´æ¥ä¼ é€’ç»™ `chokidar` çš„é€‰é¡¹ã€‚

æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹ï¼š [chokidar](https://github.com/paulmillr/chokidar#api)

#### `ignoreInitial`

- **ç±»å‹ï¼š** `boolean`
- **ç‰ˆæœ¬ï¼š2, 3**
- **é»˜è®¤ï¼š** `true`

### `rewatchOnRawEvents`

> ä¸€ä¸ªäº‹ä»¶ç±»å‹æ•°ç»„ï¼Œå½“æ¥æ”¶åˆ°è¯¥äº‹ä»¶ç±»å‹æ—¶ï¼Œå°†å¯¼è‡´è§‚å¯Ÿç¨‹åºé‡æ–°å¯åŠ¨ã€‚

- **ç‰ˆæœ¬ï¼š2, 3**

### `webpack`

> `watchOptions` ç›´æ¥ä¼ é€’ç»™ webpackã€‚

æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹ï¼š [webpack@4 watch options](https://v4.webpack.js.org/configuration/watch/#watchoptions).

#### `aggregateTimeout`

- **ç±»å‹ï¼š** `number`
- **ç‰ˆæœ¬ï¼š2, 3**
- **é»˜è®¤ï¼š** `1000`
